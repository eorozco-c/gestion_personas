{% extends 'base.html' %}
{% load static %}
{% block title %}Estadisticas{% endblock title %}
{% block content %}
<div>
    <canvas id="myChart"></canvas>
</div>
{% endblock content %}
{% block javascript %}
<script>
    $.ajax({
        type: "GET",
        url: "/estadisticas/trabajadores-sector",
        dataType: "json",
        success: function (queryset) {

            console.log(queryset)
            const labels = queryset.labels;

            const data = {
                labels: labels,
                datasets: [{
                    label: 'Trabajadores X Sector',
                    data: queryset.data,
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.2)',
                        'rgba(255, 159, 64, 0.2)',

                    ],
                    borderColor: [
                        'rgb(255, 99, 132)',
                        'rgb(255, 159, 64)',

                    ],
                    borderWidth: 1
                }]
            };

            const config = {
                type: 'bar',
                data: data,
                options: {
                    layout: {
                        padding: 20
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    },
                    responsive: true,
                },
            };
            var myChart = new Chart(
                document.getElementById('myChart'),
                config
            );
        }
    });
</script>
{% endblock javascript %}